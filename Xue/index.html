<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="renderer" content="webkit">
    <title>Xue</title>

</head>
<body>



</body>

<script>

function Xue (data) {
  this.$data
  if (typeof data === 'object') {
    console.log(this)
    this.$data = data
    this._walk(data)
  }
  
}

Xue.prototype = {
  constructor: Xue,

  _walk: function (data) {
    let val
    for (let key in data) {
      if (data.hasOwnProperty(key)) {
        val = data[key]
        if (typeof val === 'object') {
          this._walk(val)
        }
        this._watch(key, val)
      }
    }
  },

  _watch: function (key, val) {
    Object.defineProperty(this.$data, key, {
      enumerable: true,
      configurable: true,
      get: function () {
        console.log('get ' + key, val)
        return val
      },
      set: function (newVal) {
        console.log('set ' + key, newVal, val)
        if (val !== newVal) val = newVal
      }
    })
  }

}


var test = new Xue ({
  name: 'Troy',
  age: '24'
})


</script>
</html>